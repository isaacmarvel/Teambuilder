@page "/"
@using Microsoft.EntityFrameworkCore
@using PokeTeamBuilder.BlazorServer.Data
@inject PokemonContext _context

<PageTitle>Teams</PageTitle>

@*This will be my list of teams already built*@

<MudText Typo="Typo.h3" GutterBottom="true">Teams</MudText>
<MudText Class="mb-8">From this page, you can view your already-built teams, or click the button to make a new team.</MudText>
<MudButton Variant="Variant.Filled" Color="Color.Secondary" Href="/NewTeam">Build a new team</MudButton>
<br>
<br>
<h2>
    Your current teams:
</h2>

@foreach(var team in teams)
{
    <h1>@team.Id</h1>
    <ul>
        @foreach (var pokemon in team.PokemonTeamMembers.ToList())
        {
            <li>
                @pokemon.Name
            </li>
        }
    </ul>
}

@code {
    public List<Team> teams { get; set; }
    protected override void OnInitialized()
    {
        teams = _context.Teams.Include(team => team.PokemonTeamMembers).ToList();
    }
}